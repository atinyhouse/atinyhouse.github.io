# ğŸ“± è·å–å³åˆ»åŠ¨æ€å®Œæ•´æŒ‡å—

## æ–¹æ³•ä¸€ï¼šæµè§ˆå™¨æ§åˆ¶å°å¤åˆ¶ï¼ˆæœ€ç®€å•æ¨èï¼‰â­ï¸

è¿™ä¸ªæ–¹æ³•ä¸éœ€è¦å®‰è£…ä»»ä½•ä¸œè¥¿ï¼Œç›´æ¥åœ¨æµè§ˆå™¨æ“ä½œå³å¯ã€‚

### ç¬¬ä¸€æ­¥ï¼šæ‰“å¼€å³åˆ»ä¸»é¡µ

åœ¨æµè§ˆå™¨ï¼ˆChrome/Edge/Safariï¼‰ä¸­è®¿é—®ï¼š
```
https://web.okjike.com/u/71A6B3C3-1382-4121-A17A-2A4C05CB55E8
```

**é‡è¦**ï¼šç¡®ä¿ä½ å·²ç»ç™»å½•å³åˆ»è´¦å·ï¼

---

### ç¬¬äºŒæ­¥ï¼šæ‰“å¼€å¼€å‘è€…å·¥å…·

#### å¦‚æœä½ ç”¨çš„æ˜¯ Macï¼š
- æŒ‰å¿«æ·é”®ï¼š`Command âŒ˜ + Option âŒ¥ + I`
- æˆ–è€…æŒ‰ `F12`

#### å¦‚æœä½ ç”¨çš„æ˜¯ Windowsï¼š
- æŒ‰å¿«æ·é”®ï¼š`Ctrl + Shift + I`
- æˆ–è€…æŒ‰ `F12`

**åº”è¯¥å‡ºç°ï¼š** æµè§ˆå™¨åº•éƒ¨æˆ–å³ä¾§ä¼šå‡ºç°ä¸€ä¸ªå¼€å‘è€…å·¥å…·é¢æ¿

---

### ç¬¬ä¸‰æ­¥ï¼šåˆ‡æ¢åˆ° Consoleï¼ˆæ§åˆ¶å°ï¼‰æ ‡ç­¾

åœ¨å¼€å‘è€…å·¥å…·çš„é¡¶éƒ¨ï¼Œæ‰¾åˆ°å¹¶ç‚¹å‡» **Console** æ ‡ç­¾

---

### ç¬¬å››æ­¥ï¼šæ»šåŠ¨åŠ è½½æ›´å¤šåŠ¨æ€ï¼ˆå¯é€‰ï¼‰

åœ¨å³åˆ»é¡µé¢å‘ä¸‹æ»šåŠ¨ï¼ŒåŠ è½½æ›´å¤šå†å²åŠ¨æ€ã€‚å»ºè®®åŠ è½½åˆ°ä½ æƒ³è¦å±•ç¤ºçš„æ‰€æœ‰åŠ¨æ€ä¸ºæ­¢ã€‚

---

### ç¬¬äº”æ­¥ï¼šå¤åˆ¶ä»£ç å¹¶æ‰§è¡Œ

**å¤åˆ¶ä¸‹é¢çš„å®Œæ•´ä»£ç **ï¼ˆä»ç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡Œï¼‰ï¼š

```javascript
// ===== å³åˆ»åŠ¨æ€æå–è„šæœ¬ - å¼€å§‹ =====
(function() {
    console.log('ğŸš€ å¼€å§‹æå–å³åˆ»åŠ¨æ€...');

    const posts = [];

    // å°è¯•å¤šç§å¯èƒ½çš„é€‰æ‹©å™¨
    const selectors = [
        '[class*="FeedItem"]',
        '[class*="feed-item"]',
        'article',
        '[data-type="ORIGINAL_POST"]'
    ];

    let postElements = null;
    for (const selector of selectors) {
        postElements = document.querySelectorAll(selector);
        if (postElements.length > 0) {
            console.log(`âœ… ä½¿ç”¨é€‰æ‹©å™¨: ${selector}, æ‰¾åˆ° ${postElements.length} ä¸ªå…ƒç´ `);
            break;
        }
    }

    if (!postElements || postElements.length === 0) {
        alert('âŒ æœªæ‰¾åˆ°åŠ¨æ€å†…å®¹ï¼\n\nå¯èƒ½åŸå› ï¼š\n1. é¡µé¢æœªåŠ è½½å®Œæˆ\n2. æœªç™»å½•å³åˆ»è´¦å·\n3. ç½‘é¡µç»“æ„å·²æ›´æ–°\n\nè¯·åˆ·æ–°é¡µé¢é‡è¯•');
        return;
    }

    // æå–åŠ¨æ€æ•°æ®
    postElements.forEach((el, idx) => {
        if (idx > 50) return; // æœ€å¤šæå–50æ¡

        const post = {};

        // æå–æ—¥æœŸæ—¶é—´
        const timeEl = el.querySelector('time') ||
                       el.querySelector('[class*="time"]') ||
                       el.querySelector('[class*="date"]');

        if (timeEl) {
            const datetime = timeEl.getAttribute('datetime') || timeEl.textContent;
            try {
                const date = new Date(datetime);
                if (!isNaN(date.getTime())) {
                    post.date = date.toISOString().split('T')[0];
                    post.time = date.toTimeString().substring(0, 5);
                }
            } catch(e) {
                console.warn('æ—¶é—´è§£æå¤±è´¥', datetime);
            }
        }

        // æå–å†…å®¹æ–‡æœ¬
        const contentEl = el.querySelector('[class*="content"]') ||
                          el.querySelector('[class*="RichContent"]') ||
                          el.querySelector('p');

        if (contentEl) {
            let text = contentEl.innerText || contentEl.textContent;
            text = text.trim();

            // æ¸…ç†å¤šä½™ç©ºç™½
            text = text.replace(/\n{3,}/g, '\n\n');
            text = text.replace(/[ \t]+/g, ' ');

            // é™åˆ¶é•¿åº¦
            if (text.length > 1000) {
                text = text.substring(0, 1000) + '...';
            }

            if (text) {
                post.content = text;
            }
        }

        // æå–å›¾ç‰‡
        const imgs = el.querySelectorAll('img');
        const imageUrls = [];

        imgs.forEach(img => {
            const src = img.src || img.getAttribute('data-src');
            // è¿‡æ»¤æ‰å¤´åƒå’Œå°å›¾æ ‡
            if (src &&
                !src.includes('avatar') &&
                !src.includes('icon') &&
                src.includes('jike')) {
                imageUrls.push(src);
            }
        });

        if (imageUrls.length > 0) {
            post.images = imageUrls.slice(0, 9); // æœ€å¤š9å¼ å›¾
        }

        // æå–é“¾æ¥
        const links = el.querySelectorAll('a[href^="http"]');
        links.forEach(link => {
            const href = link.href;
            // æ’é™¤å³åˆ»è‡ªå·±çš„é“¾æ¥
            if (!href.includes('okjike.com') &&
                !href.includes('ruguoapp.com')) {
                post.link = href;
                post.link_title = link.textContent.trim() || 'æŸ¥çœ‹é“¾æ¥';
            }
        });

        // åªä¿å­˜æœ‰æ•ˆçš„åŠ¨æ€
        if (post.content || post.images) {
            posts.push(post);
        }
    });

    if (posts.length === 0) {
        alert('âŒ æ²¡æœ‰æå–åˆ°æœ‰æ•ˆå†…å®¹ï¼\n\nè¯·ç¡®è®¤ï¼š\n1. é¡µé¢æ˜¯å¦æ˜¾ç¤ºäº†ä½ çš„åŠ¨æ€\n2. æ˜¯å¦å·²ç™»å½•');
        return;
    }

    console.log(`âœ… æˆåŠŸæå– ${posts.length} æ¡åŠ¨æ€`);

    // ç”Ÿæˆ YAML æ ¼å¼
    let yaml = '# ============================================\n';
    yaml += '# Thoughts æ•°æ®æ–‡ä»¶ - å³åˆ»åŠ¨æ€ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰\n';
    yaml += '# ============================================\n';
    yaml += '#\n';
    yaml += `# æå–æ—¶é—´: ${new Date().toLocaleString('zh-CN')}\n`;
    yaml += `# åŠ¨æ€æ•°é‡: ${posts.length} æ¡\n`;
    yaml += '#\n';
    yaml += '# ============================================\n\n';

    posts.forEach(post => {
        yaml += `- date: ${post.date || '2025-01-01'}\n`;

        if (post.time) {
            yaml += `  time: "${post.time}"\n`;
        }

        if (post.content) {
            // å¤„ç†å¤šè¡Œå†…å®¹
            const lines = post.content.split('\n');
            if (lines.length > 1 || post.content.includes(':')) {
                yaml += '  content: |\n';
                lines.forEach(line => {
                    yaml += `    ${line}\n`;
                });
            } else {
                // å•è¡Œå†…å®¹éœ€è¦å¤„ç†ç‰¹æ®Šå­—ç¬¦
                const escaped = post.content
                    .replace(/\\/g, '\\\\')
                    .replace(/"/g, '\\"');
                yaml += `  content: "${escaped}"\n`;
            }
        }

        if (post.images && post.images.length > 0) {
            yaml += '  images:\n';
            post.images.forEach(img => {
                yaml += `    - ${img}\n`;
            });
        }

        if (post.link) {
            yaml += `  link: ${post.link}\n`;
            const escapedTitle = (post.link_title || 'æŸ¥çœ‹é“¾æ¥')
                .replace(/\\/g, '\\\\')
                .replace(/"/g, '\\"');
            yaml += `  link_title: "${escapedTitle}"\n`;
        }

        yaml += '\n';
    });

    // ä¸‹è½½æ–‡ä»¶
    const blob = new Blob([yaml], { type: 'text/yaml;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'thoughts.yml';
    a.click();
    URL.revokeObjectURL(url);

    // æ˜¾ç¤ºç»“æœ
    console.log('ğŸ“„ YAML å†…å®¹é¢„è§ˆï¼š');
    console.log(yaml.substring(0, 500) + '...');

    alert(`âœ… æˆåŠŸæå– ${posts.length} æ¡åŠ¨æ€ï¼\n\næ–‡ä»¶å·²è‡ªåŠ¨ä¸‹è½½ä¸ºï¼šthoughts.yml\n\nè¯·å°†æ­¤æ–‡ä»¶æ›¿æ¢åˆ°ï¼š\n_data/thoughts.yml`);
})();
// ===== å³åˆ»åŠ¨æ€æå–è„šæœ¬ - ç»“æŸ =====
```

**æ“ä½œï¼š**
1. å…¨é€‰ä¸Šé¢çš„ä»£ç ï¼ˆCommand+A æˆ– Ctrl+Aï¼‰
2. å¤åˆ¶ï¼ˆCommand+C æˆ– Ctrl+Cï¼‰
3. åœ¨ Console æ§åˆ¶å°ä¸­ç²˜è´´ï¼ˆCommand+V æˆ– Ctrl+Vï¼‰
4. æŒ‰å›è½¦é”®æ‰§è¡Œ

---

### ç¬¬å…­æ­¥ï¼šç­‰å¾…ä¸‹è½½

è„šæœ¬æ‰§è¡Œåä¼šï¼š
- åœ¨æ§åˆ¶å°æ˜¾ç¤ºæå–è¿›åº¦
- è‡ªåŠ¨ä¸‹è½½ `thoughts.yml` æ–‡ä»¶
- å¼¹å‡ºæˆåŠŸæç¤º

**ä¸‹è½½ä½ç½®ï¼š** é€šå¸¸åœ¨ä½ çš„"ä¸‹è½½"æ–‡ä»¶å¤¹

---

### ç¬¬ä¸ƒæ­¥ï¼šæ›¿æ¢æ–‡ä»¶

æ‰¾åˆ°ä¸‹è½½çš„ `thoughts.yml` æ–‡ä»¶ï¼Œå°†å®ƒå¤åˆ¶åˆ°ï¼š
```
/Users/didi/Desktop/b/atinyhouse.github.io/_data/thoughts.yml
```

**ç›´æ¥æ›¿æ¢**åŸæ¥çš„æ–‡ä»¶å³å¯ï¼

---

### ç¬¬å…«æ­¥ï¼šéªŒè¯æ•°æ®

ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ `thoughts.yml`ï¼Œåº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹ï¼š

```yaml
# ============================================
# Thoughts æ•°æ®æ–‡ä»¶ - å³åˆ»åŠ¨æ€ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
# ============================================

- date: 2025-01-20
  time: "14:30"
  content: |
    è¿™æ˜¯ä¸€æ¡å³åˆ»åŠ¨æ€çš„å†…å®¹

    å¯ä»¥æœ‰å¤šè¡Œ

- date: 2025-01-19
  content: "å¦ä¸€æ¡åŠ¨æ€"
  images:
    - https://example.com/image.jpg
```

---

## æ–¹æ³•äºŒï¼šä½¿ç”¨æµè§ˆå™¨ä¹¦ç­¾æŒ‰é’®

### æ­¥éª¤ 1ï¼šæ‰“å¼€ä¹¦ç­¾å·¥å…·é¡µé¢

åœ¨ç»ˆç«¯æ‰§è¡Œï¼š
```bash
open /Users/didi/Desktop/b/atinyhouse.github.io/scripts/jike_bookmarklet.html
```

æˆ–è€…ç›´æ¥åœ¨ Finder ä¸­æ‰“å¼€è¯¥ HTML æ–‡ä»¶ã€‚

### æ­¥éª¤ 2ï¼šæ·»åŠ ä¹¦ç­¾

çœ‹åˆ°é¡µé¢ä¸Šæœ‰ä¸€ä¸ªç´«è‰²æŒ‰é’®"ğŸš€ æŠ“å–å³åˆ»åŠ¨æ€"ï¼Œ**æ‹–æ‹½**è¿™ä¸ªæŒ‰é’®åˆ°æµè§ˆå™¨çš„ä¹¦ç­¾æ ã€‚

### æ­¥éª¤ 3ï¼šè®¿é—®å³åˆ»ä¸»é¡µ

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä½ çš„å³åˆ»ä¸»é¡µã€‚

### æ­¥éª¤ 4ï¼šç‚¹å‡»ä¹¦ç­¾

ç‚¹å‡»åˆšæ‰æ·»åŠ çš„ä¹¦ç­¾æŒ‰é’®ï¼Œä¼šè‡ªåŠ¨ä¸‹è½½ `thoughts.yml` æ–‡ä»¶ã€‚

---

## æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ Python è„šæœ¬ï¼ˆéœ€è¦æŠ€æœ¯åŸºç¡€ï¼‰

### å‰ç½®æ¡ä»¶

ç¡®ä¿å·²å®‰è£… Python 3ï¼š
```bash
python3 --version
```

### å®‰è£…ä¾èµ–

```bash
cd /Users/didi/Desktop/b/atinyhouse.github.io
pip3 install pyyaml requests
```

### æ–¹æ¡ˆ 3Aï¼šç›´æ¥ API è·å–

```bash
python3 scripts/fetch_jike.py
```

å¦‚æœå³åˆ» API è¦æ±‚ç™»å½•ï¼Œä¼šæç¤ºå¤±è´¥ã€‚

### æ–¹æ¡ˆ 3Bï¼šè§£æ JSON æ•°æ®

**æ­¥éª¤ 1ï¼š** åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­ï¼š
1. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. åˆ‡æ¢åˆ° **Network**ï¼ˆç½‘ç»œï¼‰æ ‡ç­¾
3. åˆ·æ–°å³åˆ»ä¸»é¡µ
4. æ‰¾åˆ°åŒ…å« `userPost` æˆ– `loadmore` çš„è¯·æ±‚
5. å³é”® â†’ Copy â†’ Copy Responseï¼ˆå¤åˆ¶å“åº”ï¼‰

**æ­¥éª¤ 2ï¼š** ä¿å­˜ä¸º JSON æ–‡ä»¶ï¼š
```bash
# åˆ›å»ºæ–‡ä»¶
touch /Users/didi/Desktop/b/atinyhouse.github.io/jike_data.json

# ç”¨ç¼–è¾‘å™¨æ‰“å¼€ï¼Œç²˜è´´åˆšæ‰å¤åˆ¶çš„å†…å®¹
```

**æ­¥éª¤ 3ï¼š** è¿è¡Œè§£æè„šæœ¬ï¼š
```bash
cd /Users/didi/Desktop/b/atinyhouse.github.io
python3 scripts/parse_jike_json.py jike_data.json
```

ä¼šè‡ªåŠ¨ç”Ÿæˆ `_data/thoughts.yml` æ–‡ä»¶ã€‚

---

## å¸¸è§é—®é¢˜è§£å†³

### Q1: æç¤º"æœªæ‰¾åˆ°åŠ¨æ€å†…å®¹"

**åŸå› ï¼š**
- é¡µé¢æœªåŠ è½½å®Œæˆ
- æœªç™»å½•å³åˆ»è´¦å·
- å³åˆ»é¡µé¢ç»“æ„æ›´æ–°

**è§£å†³ï¼š**
1. ç¡®ä¿å·²ç™»å½•å³åˆ»
2. ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½
3. å‘ä¸‹æ»šåŠ¨åŠ è½½æ›´å¤šåŠ¨æ€
4. åˆ·æ–°é¡µé¢é‡è¯•

---

### Q2: ä¸‹è½½çš„æ–‡ä»¶æ˜¯ç©ºçš„æˆ–æ ¼å¼é”™è¯¯

**è§£å†³ï¼š**
- ç¡®ä¿å®Œæ•´å¤åˆ¶äº†è„šæœ¬ä»£ç ï¼ˆä»ç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡Œï¼‰
- æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ï¼ˆçº¢è‰²æ–‡å­—ï¼‰
- å°è¯•åœ¨æ— ç—•æ¨¡å¼ä¸‹é‡æ–°ç™»å½•å³åˆ»

---

### Q3: å›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥

**è¯´æ˜ï¼š** å³åˆ»å›¾ç‰‡é“¾æ¥éœ€è¦ç½‘ç»œè®¿é—®ï¼Œæœ¬åœ°é¢„è§ˆæ—¶å¯èƒ½çœ‹ä¸åˆ°ã€‚

**è§£å†³ï¼š** æ¨é€åˆ° GitHub Pages ååœ¨çº¿æŸ¥çœ‹å³å¯ã€‚

---

### Q4: æ—¥æœŸæ—¶é—´ä¸å¯¹

**è¯´æ˜ï¼š** è„šæœ¬ä¼šå°½é‡æå–å‡†ç¡®çš„æ—¶é—´ï¼Œä½†å¦‚æœå³åˆ»é¡µé¢æ ¼å¼å˜åŒ–ï¼Œå¯èƒ½æå–å¤±è´¥ã€‚

**è§£å†³ï¼š** æ‰‹åŠ¨ç¼–è¾‘ `thoughts.yml` æ–‡ä»¶ä¿®æ­£æ—¥æœŸã€‚

---

## æå–æˆåŠŸå

### æŸ¥çœ‹æ•°æ®

```bash
cat /Users/didi/Desktop/b/atinyhouse.github.io/_data/thoughts.yml
```

### æœ¬åœ°é¢„è§ˆ

```bash
# å…ˆå®‰è£… Jekyllï¼ˆå¦‚æœè¿˜æ²¡è£…ï¼‰
gem install jekyll bundler

# å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
cd /Users/didi/Desktop/b/atinyhouse.github.io
bundle install
bundle exec jekyll serve

# æµè§ˆå™¨è®¿é—®
open http://localhost:4000/thoughts/
```

### æ¨é€åˆ° GitHub

```bash
cd /Users/didi/Desktop/b/atinyhouse.github.io
git add _data/thoughts.yml
git commit -m "æ›´æ–°å³åˆ»åŠ¨æ€æ•°æ®"
git push origin gh-pages

# ç­‰å¾… 1-2 åˆ†é’Ÿåè®¿é—®
open https://atinyhouse.github.io/thoughts/
```

---

## å®šæœŸæ›´æ–°

æ¯æ¬¡æƒ³æ›´æ–°å³åˆ»åŠ¨æ€æ—¶ï¼š

1. é‡å¤ã€Œæ–¹æ³•ä¸€ã€çš„æ­¥éª¤
2. æ›¿æ¢ `_data/thoughts.yml` æ–‡ä»¶
3. æäº¤å¹¶æ¨é€åˆ° GitHub

**å»ºè®®ï¼š** æ¯å‘¨æˆ–æ¯æœˆæ›´æ–°ä¸€æ¬¡ã€‚

---

## éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ï¼š** å¼€å‘è€…å·¥å…·çš„ Console æ ‡ç­¾ä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
2. **æ£€æŸ¥ç½‘ç»œï¼š** ç¡®ä¿èƒ½æ­£å¸¸è®¿é—®å³åˆ»ç½‘ç«™
3. **æ›´æ–°æµè§ˆå™¨ï¼š** ä½¿ç”¨æœ€æ–°ç‰ˆ Chromeã€Edge æˆ– Safari
4. **æ¸…é™¤ç¼“å­˜ï¼š** å°è¯•æ¸…é™¤æµè§ˆå™¨ç¼“å­˜åé‡è¯•

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ ğŸ‰**
